<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - C-meet</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h2>C-meet</h2>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link active">Dashboard</a>
                <a href="#" class="nav-link" id="messagesLink">Messages</a>
                <a href="#" class="nav-link" id="profileLink">Profile</a>
                <div class="notification-icon" id="notificationBell">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                    <span class="notification-badge hidden" id="notificationCount">0</span>
                </div>
                <button class="btn btn-logout" id="logoutBtn">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Notification Dropdown -->
    <div class="notification-dropdown hidden" id="notificationDropdown">
        <h3>Notifications</h3>
        <div id="notificationList">
            <p class="no-notifications">No new notifications</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-menu">
                <a href="#" class="sidebar-item active" id="feedTab">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                    Feed
                </a>
                <a href="#" class="sidebar-item" id="roomsTab">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                    Rooms
                </a>
                <a href="#" class="sidebar-item" id="pagesTab">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                    Pages
                </a>
                <a href="#" class="sidebar-item" id="friendsTab">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                    Friends
                </a>
            </div>

            <button class="btn btn-primary create-menu-btn" id="createMenuBtn">
                <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                Create
            </button>

            <!-- Create Menu Dropdown -->
            <div class="create-dropdown hidden" id="createDropdown">
                <button class="dropdown-item" id="createPostBtn">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                    </svg>
                    Create Post
                </button>
                <button class="dropdown-item" id="createRoomBtnMenu">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                    </svg>
                    Create Room
                </button>
                <button class="dropdown-item" id="createPageBtn">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                    </svg>
                    Create Page
                </button>
            </div>
        </aside>

        <!-- Main Feed Area -->
        <main class="main-feed">
            <!-- Search Bar -->
            <div class="search-section">
                <div class="search-container">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                    <input type="text" id="globalSearch" placeholder="Search people, rooms, or pages..." class="global-search-input">
                </div>
                <select id="searchFilter" class="search-filter">
                    <option value="all">All</option>
                    <option value="people">People</option>
                    <option value="rooms">Rooms</option>
                    <option value="pages">Pages</option>
                </select>
            </div>

            <!-- Feed View -->
            <div class="feed-view" id="feedView">
                <!-- Create Post Card -->
                <div class="create-post-card">
                    <img src="https://via.placeholder.com/40" alt="Avatar" id="userAvatarSmall" class="post-avatar">
                    <button class="create-post-input" id="createPostInputBtn">What's on your mind?</button>
                </div>

                <!-- Posts Feed -->
                <div id="postsFeed">
                    <!-- Posts will be loaded here -->
                </div>
            </div>

            <!-- Rooms View -->
            <div class="rooms-view hidden" id="roomsView">
                <div class="view-header">
                    <h2>Discussion Rooms</h2>
                </div>
                <div class="rooms-grid" id="roomsGrid">
                    <!-- Rooms will be loaded here -->
                </div>
            </div>

            <!-- Pages View -->
            <div class="pages-view hidden" id="pagesView">
                <div class="view-header">
                    <h2>Pages</h2>
                </div>
                <div class="pages-grid" id="pagesGrid">
                    <!-- Pages will be loaded here -->
                </div>
            </div>

            <!-- Friends View -->
            <div class="friends-view hidden" id="friendsView">
                <div class="view-header">
                    <h2>Friends</h2>
                </div>
                <div class="friends-grid" id="friendsGrid">
                    <!-- Friends will be loaded here -->
                </div>
            </div>

            <!-- Users Grid (for search) -->
            <div class="users-grid hidden" id="usersGrid">
                <!-- Users will be dynamically loaded here -->
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <h3>Friend Requests</h3>
            <div id="friendRequestsList">
                <!-- Friend requests will appear here -->
            </div>

            <h3 style="margin-top: 24px;">Online Friends</h3>
            <div id="onlineFriendsList">
                <!-- Online friends will appear here -->
            </div>
        </aside>
    </div>

    <!-- Create Post Modal -->
    <div class="modal hidden" id="privateMessageModal">
        <div class="modal-content">
            <span class="close-modal" id="closePrivateMessage">&times;</span>
            <h2>Message <span id="recipientName"></span></h2>
            <div class="private-messages-container" id="privateMessagesContainer">
                <!-- Messages will be loaded here -->
            </div>
            <div class="message-input-container">
                <input type="text" id="privateMessageInput" placeholder="Type your message..." class="message-input">
                <button class="btn btn-primary" id="sendPrivateMessageBtn">Send</button>
            </div>
        </div>
    </div>

    <!-- Create Post Modal -->
    <div class="modal hidden" id="createPostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Post</h2>
                <button class="close-modal" id="closePostModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="post-user-info">
                    <img src="https://via.placeholder.com/40" alt="Avatar" id="postUserAvatar" class="post-avatar">
                    <div>
                        <div id="postUserName" class="post-user-name">User</div>
                        <select id="postPrivacy" class="privacy-select">
                            <option value="public">üåç Public</option>
                            <option value="friends">üë• Friends</option>
                            <option value="private">üîí Only Me</option>
                        </select>
                    </div>
                </div>
                <textarea id="postContent" class="post-textarea" placeholder="What's on your mind?"></textarea>
                <div class="post-image-preview hidden" id="postImagePreview">
                    <img src="" alt="Preview" id="postPreviewImg">
                    <button class="remove-image-btn" id="removePostImage">&times;</button>
                </div>
                <div class="post-actions">
                    <label class="post-action-btn">
                        <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                        </svg>
                        Photo
                        <input type="file" id="postImageInput" accept="image/*" hidden>
                    </label>
                </div>
                <button class="btn btn-primary btn-full-width" id="submitPost">Post</button>
            </div>
        </div>
    </div>

    <!-- Create Page Modal -->
    <div class="modal hidden" id="createPageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create Page</h2>
                <button class="close-modal" id="closePageModal">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="pageNameInput" class="input-field" placeholder="Page name">
                <textarea id="pageDescInput" class="textarea-field" placeholder="Page description"></textarea>
                <select id="pageCategoryInput" class="input-field">
                    <option value="business">Business</option>
                    <option value="community">Community</option>
                    <option value="brand">Brand</option>
                    <option value="artist">Artist/Band</option>
                    <option value="public-figure">Public Figure</option>
                    <option value="entertainment">Entertainment</option>
                    <option value="cause">Cause/Community</option>
                    <option value="other">Other</option>
                </select>
                <label class="file-upload-label">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                    </svg>
                    Upload Page Image
                    <input type="file" id="pageImageInput" accept="image/*" hidden>
                </label>
                <div class="image-preview hidden" id="pageImagePreview">
                    <img src="" alt="Preview" id="pagePreviewImg">
                </div>
                <button class="btn btn-primary btn-full-width" id="submitCreatePage">Create Page</button>
            </div>
        </div>
    </div>

    <!-- Comment Modal -->
    <div class="modal hidden" id="commentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Comments</h2>
                <button class="close-modal" id="closeCommentModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="commentsList" class="comments-list">
                    <!-- Comments will be loaded here -->
                </div>
                <div class="comment-input-container">
                    <input type="text" id="commentInput" class="input-field" placeholder="Write a comment...">
                    <button class="btn btn-primary" id="submitComment">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Room Modal -->
    <div class="modal hidden" id="createRoomModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2>Create Discussion Room</h2>
            <form id="createRoomForm">
                <div class="form-group">
                    <label for="roomName">Room Name</label>
                    <input type="text" id="roomName" placeholder="Enter room name" required>
                </div>
                <div class="form-group">
                    <label for="roomDescription">Description</label>
                    <textarea id="roomDescription" placeholder="Describe your room" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="roomCategory">Category</label>
                    <select id="roomCategory" required>
                        <option value="">Select a category</option>
                        <option value="technology">Technology</option>
                        <option value="art">Art</option>
                        <option value="music">Music</option>
                        <option value="literature">Literature</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="roomImage">Room Image URL (optional)</label>
                    <input type="text" id="roomImage" placeholder="Enter image URL or upload via Imgur">
                    <button type="button" class="btn btn-secondary" id="uploadImageBtn">Upload Image</button>
                    <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                </div>
                <button type="submit" class="btn btn-primary">Create Room</button>
            </form>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal hidden" id="profileModal">
        <div class="modal-content">
            <span class="close-modal" id="closeProfileModal">&times;</span>
            <h2>My Profile</h2>
            <form id="profileForm">
                <div class="profile-avatar">
                    <img id="profileAvatar" src="https://via.placeholder.com/120" alt="Profile">
                    <button type="button" class="btn btn-secondary" id="uploadAvatarBtn">Change Avatar</button>
                    <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                </div>
                <div class="form-group">
                    <label for="profileName">Display Name</label>
                    <input type="text" id="profileName" required>
                </div>
                <div class="form-group">
                    <label for="profileBio">Bio</label>
                    <textarea id="profileBio" rows="3" placeholder="Tell us about yourself"></textarea>
                </div>
                <div class="form-group">
                    <label for="profileInterests">Interests (comma separated)</label>
                    <input type="text" id="profileInterests" placeholder="e.g., Technology, Music, Art">
                </div>
                <button type="submit" class="btn btn-primary">Save Profile</button>
            </form>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script src="js/config.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/posts.js"></script>
    <script src="js/pages.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/imgur.js"></script>
    <script src="js/messaging.js"></script>
</body>
</html>
